Наполнение контентом
====================

Тикеры
-------

Добавление тикера
^^^^^^^^^^^^^^^^^
Переходим на страницу `создания тикера <https://mwrk.ru/admin/core/ticker/add/>`_

.. image:: _static/content/ticker.png

К заполнению доступны 2 поля - *Лого* и *Кодовое имя*.
Все остальные подтянутся автоматически (цена, валюта, название, площадка).
Обязательное поле к заполнению только *Кодовое имя*. Ориентируясь на него, мы сможем получать актуальные данные с Freedom Finace.

.. caution:: 
    Кодовое имя должно быть уникальным в рамках уже созданных на нашей стороне тикеров. В противном случае тикер не создастся


Вводим к примеру "SBER" и нажимаем ``Сохранить``
Если тикер есть у Freedom, то появится и у нас:

.. image:: _static/content/ticker_success.png

Поле *Лого* устанавливаем сами


Массовая синхронизация тикеров с Freedom Finace
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.. note::
    В самом Freedom Finance имееются данные более чем 1.5M тикеров. 
    Выкачивать их все не целособразно, поэтому для старта можно получить только самые популярные по их версии, не прибегая к ручному наполнению.


Переходим в раздел  `Тикеры <https://mwrk.ru/admin/core/ticker/>`_

.. image:: _static/content/ticker_list.png

Жмем на ``Синхр. с  Freedom Finance`` сверху на панели. Автоматически подтянутся около 300 тикеров.


.. note::
    Сама функция не несет большого сакрального смысла, это может пригодится при стартовом разворачивании проекта - когда нужно получить много нужных нам тикеров.
    Список кодовых имен тикеров можно сформировать отдельно, не опираясь на данные Freedom Finance



Идеи
----
Создание идеи
^^^^^^^^^^^^^

Переходим на `страницу создания идеи <https://mwrk.ru/admin/core/ticker/>`_

.. image:: _static/content/idea_1.png

.. image:: _static/content/idea_2.png

Обязательные к заполнению поля *выделены жирным*.

*Связываем идею с тикером* через выпадающий список поля *Тикер*.
С помощью этого меню можно найти нужный тикер либо по кодовому имени (SBER ex), либо по названию (Сбербанк ex):

.. image:: _static/content/idea_find.png


Заполнив - нажимаем ``Сохранить``.

.. note::
    Поля *"Потенциал"* и *"Текущая доходность"* высчитываются автоматически после сохранения, основываясь на значении "Текущая цена" тикера, а также "Целевая цена" и "Стартовая цена" самой идеи

.. note::
    Чек-бокс напротив *"Автоматическое закрытие"* заставит идею перейти в статус "Закрыта" в день, указанный в поле "Дата выхода"


.. note::
    Чек-бокс напротив *"Приватная"* скроет идею от публичного просмотра, став доступной только обладателям подписки.
    Если чек-бокс не стоит - идея доступна всем


Портфель
--------

Создание
^^^^^^^^


Переходим на `страницу создания портфеля <https://mwrk.ru/admin/core/investportfolio/add/>`_. 

.. image:: _static/content/portfolio.png

Вводим название - нажимаем ``Сохранить``

Созданный портфель автоматически свяжется с тем портфелем, который используется в интеграции с Comon.
Для этого нажимаем ``Синхронизировать с comon`` в нижней части панели. Синхронизация сделанным таким образом - ручная, в дальнейшем это будет происходить на автоматической основе с заданной регулярностью


.. image:: _static/content/portfolio_comon.png

.. note::
    Синхронизация может занять некоторое время ( не больше минуты) т.к. используется не классический способ парсинга, а инстанцирование реплики бразуера,  иммитируещего поведение пользователя


Раздел с `активами <https://mwrk.ru/admin/core/investasset/>`_  пополнится записями, синхронизированными с comon:

.. image:: _static/content/assets.png


Стратегии
----------

Создание стратегии
^^^^^^^^^^^^^^^^^^

Переходим на  `страницу создания стратегии <https://mwrk.ru/admin/core/strategy/add/>`_

.. image:: _static/content/strategy_1.png

.. image:: _static/content/strategy_2.png


Обязательно заполняем поля "Username comon владельца стратегии" и "ID стратегии comon". Они нужны чтобы однозначно связать сущность с теми данными, которые есть у comon. 

.. note::
    Откуда их брать? 


    К примеру, найдем на comon стратегию "Сибирский Клуб Инвесторов". Ее ссылка имеет следующую анатомию:

    ``https://www.comon.ru/user/alexlk/strategy/detail/?id=8364``,

    где alexlk - имя владельца, а 8364 - id


.. note::
     Созданная таким образом стратегия позволит получать данные с  comon.ru


Далее, выбираем из выпадающего списка нужный нам портфель. Нажимаем ``Сохранить``, а затем ``Синхронизировать с comon`` в нижней части панели.

.. note::
    Синхронизация требует не больше минуты

.. note::
    Синхронизация автоматически подтянет данные построений для графика, а также значения доходности


Статистика
-----------

Создание отдельной записи
^^^^^^^^^^^^^^^^^^^^^^^^^^

Переходим на `страницу создания статистики <https://mwrk.ru/admin/core/statistic/add/>`_


.. image:: _static/content/stat.png

Существует два варианта создания статистики: 
 - Используя данные существующей идеи
 - Внеся данные вручную



**Первый вариант**:
Нужно выбрать идею из выпадающего списка. И все.

.. note::
    Идея должна быть закрытой, чтобы оказаться в статистике


**Второй вариант**: тикер выбирать не нужно. А надо заполнить все остальные поля ввода. В том числе поставить чек-бокс напротив "Созданный вручную"

.. note::
    На фронте не будет ссылки на такую идею из таблицы стататистики

Жмем ``Сохранить``